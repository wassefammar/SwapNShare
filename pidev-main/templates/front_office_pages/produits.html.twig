{# {% extends "baseFrontOffice.html.twig" %}
{% block title %}Produits{% endblock %}

        {% block CSS %}
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link href="{{asset('frontOffice/css/bootstrap.min.css')}}" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="{{asset('frontOffice/css/tiny-slider.css')}}" rel="stylesheet">
		<link href="{{asset('frontOffice/css/style.css')}}" rel="stylesheet">
        <link href="{{asset('ProductDetails/css/style.css')}}" rel="stylesheet">
		<link href="{{asset('ProductDetails/lib/animate/animate.min.css')}}" rel="stylesheet">
		<link href="{{asset('ProductDetails/lib/owlcarousel/assets/owl.carousel.min.css')}}" rel="stylesheet">

		<!-- Customized Bootstrap Stylesheet -->
		<link href="{{asset('ProductDetails/css/style.css')}}" rel="stylesheet">

        {% endblock %}

{% block navbar %}

		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

			<div class="container">
				<a class="navbar-brand" href="{{path('index')}}">SwapNshare<span>.</span></a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li>
							<a class="nav-link" href="{{path('index')}}">Home</a>
						</li>
						<li class="nav-item active">
							<a class="nav-link" href="{{path('produits')}}">Products</a>
						</li>
						<li >
							<a class="nav-link" href="{{path('services')}}">Services</a>
						</li>
						<li>
							<a class="nav-link" href="{{path('contact')}}">Contact Us</a>
						</li>
					</ul>

					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
						<li><a class="nav-link" href="#"><img src="{{asset('frontOffice/images/user.svg')}}"></a></li>
						<li><a class="nav-link" href="{{path('panier')}}"><img src="{{asset('frontOffice/images/cart.svg')}}"></a></li>
					</ul>
				</div>
			</div>
				
		</nav>
{% endblock %}

{% block subheader %}
			<div class="hero">
				<div class="container">
					<div class="row justify-content-between">
						<div class="col-lg-5">
							<div class="intro-excerpt">
								<h1>Products</h1>
							</div>
						</div>
						<div class="col-lg-7">
							
						</div>
					</div>
				</div>
			</div>
{% endblock %}

{% block body %}
		<div class="untree_co-section product-section before-footer-section">
		    <div class="container">
			 <div class="add-button">
				    <a href="{{ path('add_produit') }}" class="green-button"> <i class="fa-solid fa-plus"></i> Add a Product</a>
			 </div>
		      	<div class="row">
		      		<!-- Start Column 1 -->
				{% for produit in pr %}
					<div class="col-12 col-md-4 col-lg-3 mb-5">
                            <a class="product-item" href="{{path('details', {id : produit.id})}}">
                                <img src="{{asset('uploads/produits/' ~ produit.photo)}}" class="img-fluid product-thumbnail" style= "width: 216px; height: 234px">
								<div class="service-category">
							    <i class="fa-solid fa-list-ul icon-service"></i>
								<p class="service-text">{{ produit.categorie.nomCategorie }}</p>
							</div>
                                <h3 class="product-title">{{ produit.titreProduit }}</h3>
                                <strong class="product-price">{{ produit.prix }} Dt</strong>
                                    <span class="icon-cross" href="{{ path('app_panier',{id : produit.id}) }}">
										 <!-- Add your custom path here -->
                                        <img src="{{asset('frontOffice/images/cross.svg')}}" class="img-fluid">
                                    </span>
                            </a>
                    </div>
                
               
					<!-- End Column 1 -->
						
				{% endfor %}

		      	</div>
		    </div>
		</div>

    {% endblock %} #}


{% extends "baseFrontOffice.html.twig" %}
{% block title %}Produits{% endblock %}

        {% block CSS %}
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link href="{{asset('frontOffice/css/bootstrap.min.css')}}" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="{{asset('frontOffice/css/tiny-slider.css')}}" rel="stylesheet">
		<link href="{{asset('frontOffice/css/style.css')}}" rel="stylesheet">
        <link href="{{asset('ProductDetails/css/style.css')}}" rel="stylesheet">
		<link href="{{asset('ProductDetails/lib/animate/animate.min.css')}}" rel="stylesheet">
		<link href="{{asset('ProductDetails/lib/owlcarousel/assets/owl.carousel.min.css')}}" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
		<!-- Customized Bootstrap Stylesheet -->
		<link href="{{asset('ProductDetails/css/style.css')}}" rel="stylesheet">

        {% endblock %}

{% block navbar %}

		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

			<div class="container">
				<a class="navbar-brand" href="{{path('index')}}">SwapNshare<span>.</span></a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
               
				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li>
							<a class="nav-link" href="{{path('index')}}">Home</a>
						</li>
						<li class="nav-item active">
							<a class="nav-link" href="{{path('produits')}}">Products</a>
						</li>
						<li >
							<a class="nav-link" href="{{path('services')}}">Services</a>
						</li>
						<li>
							<a class="nav-link" href="{{path('contact')}}">Contact Us</a>
						</li>
					</ul>

					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
						<li><a class="nav-link" href="#"><img src="{{asset('frontOffice/images/user.svg')}}"></a></li>
						<li><a class="nav-link" href="{{path('panier')}}"><img src="{{asset('frontOffice/images/cart.svg')}}"></a></li>
					</ul>
				</div>
			</div>
				
		</nav>
{% endblock %}

{% block subheader %}
			<div class="hero">
				<div class="container">
					<div class="row justify-content-between">
						<div class="col-lg-5">
							<div class="intro-excerpt">
								<h1>Products</h1>
							</div>
						</div>
						<div class="col-lg-7">
							
						</div>
					</div>
				</div>
			</div>
{% endblock %}

{% block body %}



    <!-- Shop Start -->
    <div class="container-fluid" style="padding-top: 20px;">
					<div class="add-button">
				    <a href="{{ path('add_produit') }}" class="green-button" style="text-decoration: none;"> <i class="fa-solid fa-plus"></i> Add a Product</a>
				</div> 
                                

        <div class="row px-xl-5">

            <!-- Shop Sidebar Start -->
            <div class="col-lg-3 col-md-4">
                    <div class="search">
                    <label>
                        <input type="text" placeholder="Search here"  id="searchInput"  onchange="Search(this)">
                        <ion-icon name="search-outline"></ion-icon>
                    </label>
                </div>



    
                 



                <!-- Price Start -->
                <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Filter by price</span></h5>
                <div class="bg-light p-4 mb-30">
                     
                   



              <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="price-1" value="0-100" {% if app.request.query.get('price_range') == '0-100' %}checked{% endif %} onchange="submitForm(this)">
                    <label class="form-check-label" for="price-1">0DT - 100DT</label>
                </div>
                <br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="price-2" value="100-200" {% if app.request.query.get('price_range') == '100-200' %}checked{% endif %} onchange="submitForm(this)">
                    <label class="form-check-label" for="price-2">100DT - 200DT</label>
                </div> 
                <br>
                                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="price-2" value="200-300" {% if app.request.query.get('price_range') == '200-300' %}checked{% endif %} onchange="submitForm(this)">
                    <label class="form-check-label" for="price-2">200DT - 300DT</label>
                </div> 
                <br>
                                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="price-3" value="300-400" {% if app.request.query.get('price_range') == '300-400' %}checked{% endif %} onchange="submitForm(this)">
                    <label class="form-check-label" for="price-3">300DT - 400DT</label>
                </div> 



                </div> 
                <!-- Price End -->
                

            </div>
            <!-- Shop Sidebar End -->


            <!-- Shop Product Start -->
            <div class="col-lg-9 col-md-8">
                <div class="row pb-3">
                    <div class="col-12 pb-1">
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <div class="ml-2">
							    <div class="btn-group" style="margin-right: 10px;">
                                    <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Categories</button>
                                    <div class="dropdown-menu dropdown-menu-right">
                                    {% for cat in categories %}
                                        <a class="dropdown-item" href="{{path('products', {id : cat.id})}}">{{ cat.nomCategorie }}</a>
                                    {% endfor %}
                                    </div>
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Sorting</button>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a class="dropdown-item" href="{{path('produits',{orderByDate: 'date'})}}">Latest</a>
                                        <a class="dropdown-item" onclick="sortProductsByReviews()" href="{{path('produits',{orderByRating: 'rating'})}}">Best Rating</a>
                                    </div>
                                </div>
                        
                            </div>
                        </div>
                    </div>
					{% for produit in pr %}
                    <div class="col-lg-4 col-md-6 col-sm-6 pb-1">
                        <div class="product-item bg-light mb-4">
                            <div class="product-img position-relative overflow-hidden" >
                                <img class="img-fluid w-100" src="{{asset( 'uploads/produits/' ~ produit.photo )}}" alt="" style="width: 268px; height: 268px;">
                                <div class="product-action">
                                    <a class="btn btn-outline-dark btn-square" href="{{ path('add_lc',{id : produit.id}) }}"><i class="fa-solid fa-cart-plus"></i></i></a>
                                    <a class="btn btn-outline-dark btn-square" href=""><i class="far fa-heart"></i></a>
                                    <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-sync-alt"></i></a>
                                    <a class="btn btn-outline-dark btn-square" href="{{path('details', {id : produit.id})}}"><i class="fa fa-circle-info"></i></a>
                                </div>
                            </div>
                            <div class="text-center py-4">
                                <a class="h6 text-decoration-none text-truncate" href="">{{ produit.titreProduit }}</a>
                                <div class="d-flex align-items-center justify-content-center mt-2">
                                    <h5>{{ produit.prix ~ ' DT' }}</h5>
                                </div>
                                {% set sommeReview = 0 %}
                                {% for review in produit.getReviews %}
                                {% set sommeReview = sommeReview + review.note %}
                                {% endfor %}
                                {% if produit.getReviews|length > 0 %}
                                   {% set averageReview = sommeReview / produit.getReviews|length  %}
                                {% else %}
                                   {% set averageReview = 0 %}
                                {% endif %}
                                <div class="d-flex align-items-center justify-content-center mb-1">
                                    {% for i in 1..5 %}
                                            {% if averageReview >= i %}
                                            <small class="fa fa-star text-primary mr-1"></small>
                                            {% elseif averageReview > (i - 0.5) %}
                                            <small class="fas fa-star-half-alt text-primary mr-1"></small>
                                            {% else %}
                                            <small class="far fa-star text-primary mr-1"></small>
                                            {% endif %}
                                    {% endfor %}
                                    <small>({{ produit.getReviews|length  }})</small>
                                </div>
                            </div>
                        </div>
                    </div>
					{% endfor %}

                    <div class="col-12">
                       {{ knp_pagination_render(pr) }}
                    </div>
                </div>
            </div>
            <!-- Shop Product End -->
        </div>
    </div>
    <!-- Shop End -->
    {% endblock %}

	{% block JS %}
	<script src="{{asset('frontOffice/js/bootstrap.bundle.min.js')}}"></script>
	<script src="{{asset('frontOffice/js/tiny-slider.js')}}"></script>
	<script src="{{asset('frontOffice/js/custom.js')}}"></script>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="{{ asset('lib/easing/easing.min.js') }}"></script>
    <script src="{{ asset('lib/owlcarousel/owl.carousel.min.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    


    <!-- Template Javascript -->
    <script src="{{ asset('js/main.js') }}"></script>

<script>
    function submitForm(checkbox) {
     const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach((box) => {
            if (box !== checkbox) {
                box.checked = false;
            }
        });

        const sortBy = checkbox.value;
        const currentUrl = new URL(window.location.href);
        currentUrl.searchParams.set('price_range', sortBy);
        window.location.href = currentUrl.toString();
        
    }
</script> 

<script>
    function Search(checkbox) {
        const sortBy = checkbox.value;
        const currentUrl = new URL(window.location.href);
        currentUrl.searchParams.set('searchValue', sortBy);
        window.location.href = currentUrl.toString();
        
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>
     <script>
$(document).ready(function() {
    $('#searchInput').autocomplete({
        source: '/autocomplete', // Assuming the source is a URL
        minLength: 1
    }).data('ui-autocomplete')._renderItem = function(ul, item) {
        // Customize the rendering of each item
        return $('<li>')
            .append('<div class="custom-suggestion">' + item.label + '</div>')
            .data('ui-autocomplete-item', item)
            .appendTo(ul);
    };

    // Delegate the click event to the suggestions
    $(document).on('click', '.ui-autocomplete li', function() {
        var item = $(this).data('ui-autocomplete-item');
        if (item && item.id) {
            // Include additional path details (e.g., photo) in the URL
            window.location.href = '/produit/' + encodeURIComponent(item.id) + '/' + encodeURIComponent(item.photo);
        }
    });
}); 
</script>


    
  

    <!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- Include jQuery UI -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

	 {% endblock %}
